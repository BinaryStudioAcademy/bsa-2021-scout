<app-header></app-header>

<div class="header">
    <button class="tub" autofocus>All</button>
    <button class="tub">Followed</button>
    <mat-form-field appearance="fill" floatLabel="never">
        <mat-icon class="search">search</mat-icon>
        <input matInput type="text" (keyup)="applyFilter($event)" placeholder="Search..." #input>
    </mat-form-field>
</div>

<app-spinner *ngIf="loading"></app-spinner>
<div class="user-list">
    <div class="mat-elevation-z8">
        <table #mytable mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)">

            <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef > # </th>
                <td mat-cell *matCellDef="let i = index"> {{ (i+1) + (paginator.pageIndex * paginator.pageSize)}} </td>
            </ng-container>

            <ng-container matColumnDef="full-name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="full-name"> Full name </th>
                <td mat-cell *matCellDef="let row">
                    <div class="name-logo">
                        <img src="{{row.logo}}"
                            onError="this.src='https://dostyqhotel.kz/wp-content/themes/dostyq/img/no-image.png'">
                        {{row.firstName + " " + row.lastName }}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="email">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="email"> Email </th>
                <td mat-cell *matCellDef="let row"> {{row.email}}</td>
            </ng-container>

            <ng-container matColumnDef="birth-date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="birth-date"> Birth date </th>
                <td mat-cell *matCellDef="let row"> {{row.birthDate | date:'dd.MM.yyyy'}} </td>
            </ng-container>

            <ng-container matColumnDef="creation-date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="creation-date"> Creation date </th>
                <td mat-cell *matCellDef="let row"> {{row.creationDate | date:'dd.MM.yyyy'}} </td>
            </ng-container>

            <ng-container matColumnDef="email-confirmed">
                <th mat-header-cell *matHeaderCellDef mat-sort-header="email-confirmed"> Email confirmed </th>
                <td mat-cell *matCellDef="let row"> {{row.isEmailConfirmed ? '&#10003;' : '&#10005;'}} </td>
            </ng-container>

            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let row">
                    <div class="icons">
                        <mat-icon>bookmark</mat-icon>
                        <mat-icon>edit</mat-icon>
                        <mat-icon>more_horiz</mat-icon>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">
                    <p *ngIf="input.value!==''">No data matching the filter "{{input.value}}"</p>
                    <p *ngIf="input.value===''">No data to display</p>
                </td>
            </tr>

        </table>
        <mat-paginator #paginator appStylePaginator [showTotalPages]="5" [pageSize]="10"
            [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>

    </div>
</div>
