<div class= "fixed">
<div class="dialog-title" mat-dialog-title>
    <h1>Pool details form</h1>
    <button mat-icon-button mat-dialog-close="none">
      <mat-icon>close</mat-icon>
    </button>
</div>
</div>
<app-spinner *ngIf="loading"></app-spinner>
<div class='modal-content'></div>
    <div>
        <div class="form-control">
            <form [formGroup]="poolForm">
                <div class="creator-info">
                    <div>
                        <h5>Created by</h5>
                        <mat-form-field floatLabel='never' class="al-subscribe-form-field">
                        <input matInput type="text" formControlName="createdBy">
                        </mat-form-field>
                    </div>
                    <div *ngIf="pool">
                        <h5>Created date</h5>
                        <mat-form-field floatLabel='never' class="al-subscribe-form-field" >
                            <input matInput [matDatepicker]="picker" name="date" formControlName="dateCreated"
                            placeholder="mm/dd/yyyy" [(ngModel)]="pool.dateCreated">
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
                <h5>Pool name</h5>
                <mat-form-field floatLabel='never' class="al-subscribe-form-field">
                  <input matInput type="text" formControlName="name">
                </mat-form-field>
                <h5>Description</h5>
                <mat-form-field floatLabel='never' class="al-subscribe-form-field" class="textarea">
                    <textarea matInput type="text" autocomplete="off" formControlName="description"
                    cdkTextareaAutosize
                    #autosize="cdkTextareaAutosize"
                    cdkAutosizeMinRows="2"
                    cdkAutosizeMaxRows="8"></textarea>
                </mat-form-field>
            </form>
                <h4>Applicants</h4>
                <div>
            <table mat-table [dataSource]="dataSource" matSort>
            
                <ng-container matColumnDef="firstName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Full Name </th>
                    <td mat-cell *matCellDef="let row" class='mat-column-username'>
                        <mat-icon>account_circle</mat-icon> {{ row.firstName }} {{ row.lastName}}
                    </td>
                </ng-container>

       
                <ng-container matColumnDef="position">            
                    <th mat-header-cell *matHeaderCellDef> # </th>
                    <td mat-cell *matCellDef="let i = index">{{i+1}}</td>
                </ng-container>
        
                <ng-container matColumnDef="tags">
                    <th mat-header-cell *matHeaderCellDef> Tags </th>
                    <td mat-cell *matCellDef="let applicant" class="tags-list-cell" [style.min-width]="isShowAllTags ? '150px' : '50px'">
                        <mat-list *ngIf="!isShowAllTags" class="tags-list">
                            <mat-list-item *ngFor="let tag of getFirstTags(applicant)">{{tag.tagName}}</mat-list-item>
                            <mat-list-item class="more-button" *ngIf="applicant.tags && applicant.tags.tagDtos.length > 4" (click)="toggleTags(applicant)">
                                +{{applicant.tags.tagDtos.length - 3}} more
                            </mat-list-item>
                        </mat-list>
                        
                        <div class="absolute-tags-list-container" *ngIf="applicant.isShowAllTags">
                            <div class="tags-pop-up-actions">
                                <button mat-icon-button (click)="toggleTags(applicant)">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </div><mat-list class="tags-list">
                                <mat-list-item *ngFor="let tag of applicant.tags.tagDtos">{{tag.tagName}}</mat-list-item>
                            </mat-list>
                            
                        </div>
                    </td>
                </ng-container>
        

        
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        
                <tr class="mat-row" *matNoDataRow>
                    <div *ngIf="pool && !pool.applicants.length" style="padding-top:5px">No applicants in this pool yet</div>
                </tr>       
        
            </table>
         </div>    
    </div>

</div>
